<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Multiplier Stacking Test</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #222; color: #0f0; }
        .pass { color: #0f0; }
        .fail { color: #f00; }
    </style>
</head>
<body>
    <h1>Multiplier Stacking Test</h1>
    <div id="results"></div>

    <script src="js/activities.js"></script>
    <script src="js/data-utils.js"></script>
    
    <script>
        const results = document.getElementById('results');
        
        // Test stacking
        const tests = [
            {
                name: 'Single 2x multiplier',
                activity: ACTIVITIES.consumables.find(a => a.id === 'beer'),
                multipliers: ['boat'],
                expected: 2  // 1 * 2
            },
            {
                name: 'Double stacking (2x * 3x)',
                activity: ACTIVITIES.consumables.find(a => a.id === 'beer'),
                multipliers: ['boat', 'latenight'],
                expected: 6  // 1 * 2 * 3
            },
            {
                name: 'Triple stacking (2x * 2x * 4x)',
                activity: ACTIVITIES.consumables.find(a => a.id === 'shot'),
                multipliers: ['boat', 'usc', 'island'],
                expected: 32  // 2 * 2 * 2 * 4
            },
            {
                name: 'Extreme (10x * 4x)',
                activity: ACTIVITIES.consumables.find(a => a.id === 'beer'),
                multipliers: ['towing', 'island'],
                expected: 40  // 1 * 10 * 4
            }
        ];
        
        let passed = 0, failed = 0;
        
        tests.forEach(test => {
            const points = DataUtils.calculatePoints(test.activity, test.multipliers, 1, {});
            const pass = points === test.expected;
            
            if (pass) passed++;
            else failed++;
            
            results.innerHTML += `<div class="${pass ? 'pass' : 'fail'}">
                ${pass ? '✓' : '✗'} ${test.name}: 
                ${test.activity.name} (base ${test.activity.basePoints}) × 
                [${test.multipliers.join(', ')}] = 
                ${points} (expected ${test.expected})
            </div>`;
        });
        
        results.innerHTML += `<h2>${passed}/${tests.length} tests passed</h2>`;
        
        if (failed === 0) {
            results.innerHTML += '<div class="pass">✅ All stacking tests passed!</div>';
        }
    </script>
</body>
</html>